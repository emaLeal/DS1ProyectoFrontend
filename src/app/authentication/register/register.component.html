<div class="login-container">
  <mat-stepper [linear]="isLinear" #stepper class="custom-stepper">
    <!-- Paso 1 -->
    <mat-step [stepControl]="firstFormGroup">
      <ng-template matStepLabel>
        <span class="step-label">{{ 'register.personal_information' | translate }}</span>
      </ng-template>
      <form [formGroup]="form!">
        <div class="login-card">
          <div class="login-header">
            {{ 'register.welcome_label' | translate }}
          </div>
          <div class="login-icon">
            <img src="assets/img/user-icon.png" alt="User Icon">
          </div>

                   
          <mat-form-field class="custom-field">
            <mat-label>{{ 'register.name' | translate }}</mat-label>
            <input matInput type="text" class="custom-input" [placeholder]="'register.name_label' | translate" formControlName="name"
            (keypress)="onlyLetters($event)">
            <mat-icon matPrefix>person</mat-icon>
          </mat-form-field>

          <mat-form-field class="custom-field">
            <mat-label>{{ 'register.last_name' | translate }}</mat-label>
            <input matInput class="custom-input" [placeholder]="'register.lastname_label' | translate" formControlName="lastname"
            (keypress)="onlyLetters($event)">
            <mat-icon matPrefix>person</mat-icon>
          </mat-form-field>

          <mat-form-field class="custom-field">
            <mat-label>{{ 'register.id_type' | translate }}</mat-label>
            <mat-select class="custom-input" formControlName="idType" [placeholder]="'register.id_type_label' | translate">
              <mat-option *ngFor="let type of documentTypes" [value]="type.value">
                {{ type.label | translate }} 
              </mat-option>
            </mat-select>
            <mat-icon matPrefix>badge</mat-icon>
          </mat-form-field>
          
          
          <mat-form-field class="custom-field">
            <mat-label>{{ 'register.id' | translate }}</mat-label>
            <input matInput type="number" class="custom-input" formControlName="idType" [placeholder]="'register.id_label' | translate" formControlName="id">
            <mat-icon matPrefix>key</mat-icon>
          </mat-form-field>

          <mat-form-field class="custom-field" appearance="fill">
            <mat-label>{{ 'register.birth' | translate }}</mat-label>
            <input matInput type="date" class="custom-input" [placeholder]="'register.birth_label' | translate" formControlName="birth">
            <mat-icon matPrefix>calendar_today</mat-icon>
          </mat-form-field>
          
          <mat-form-field appearance="fill" class="custom-field">
            <mat-label>{{ 'register.gender' | translate }}</mat-label>
            <mat-select
              formControlName="gender"
              [placeholder]="'register.gender_label' | translate"
              panelClass="custom-select-panel">
              <mat-option *ngFor="let type of genderTypes" [value]="type.value">
                {{ type.label | translate }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix>person</mat-icon>
          </mat-form-field>
          

           <div>
            <button mat-button color="primary" class="login-btn" matStepperNext>
              {{ 'register.button_next' | translate }}
            </button>
            <p style="margin-top: 15px;">
              {{ 'register.have_account' | translate }} <a href="/login">{{ 'register.login_now' | translate }}</a>
            </p> 
          </div>
        </div>
      </form>
    </mat-step>

<!-- Paso 2 -->
<mat-step [stepControl]="secondFormGroup">
  <ng-template matStepLabel>
    <span class="step-label">{{ 'register.contact_information' | translate }}</span>
  </ng-template>
  <form [formGroup]="form!">
    <div class="login-card">
      <div class="login-header">
        {{ 'register.welcome_label' | translate }}
      </div>
      <div class="login-icon">
        <img src="assets/img/user-icon.png" alt="User Icon">
      </div>

      <mat-form-field class="custom-field">
        <mat-label>{{ 'register.email' | translate }}</mat-label>
        <input matInput type="email" class="custom-input" [placeholder]="'register.email_label' | translate" formControlName="email">
        <mat-icon matPrefix>mail</mat-icon>
      </mat-form-field>

      <mat-form-field class="custom-field">
        <mat-label>{{ 'register.mobile' | translate }}</mat-label>
        <input matInput type="number" class="custom-input" [placeholder]="'register.mobile_label' | translate" formControlName="mobile">
        <mat-icon matPrefix>smartphone</mat-icon>
      </mat-form-field>

      <mat-form-field class="custom-field">
        <mat-label>{{ 'register.phone' | translate }}</mat-label>
        <input matInput type="number" class="custom-input" [placeholder]="'register.phone_label' | translate" formControlName="phone">
        <mat-icon matPrefix>call</mat-icon>
      </mat-form-field>

      <mat-form-field class="custom-field">
        <mat-label>{{ 'register.address' | translate }}</mat-label>
        <input matInput type="text" class="custom-input" [placeholder]="'register.address_label' | translate" formControlName="address">
        <mat-icon matPrefix>home</mat-icon>
      </mat-form-field>

      <div style="display: flex; justify-content: space-between;">
        <button mat-button color="primary" class="login-btn" matStepperPrevious>
          {{ 'register.button_back' | translate }}
        </button> <p></p>
        <button mat-button color="primary" class="login-btn" matStepperNext>
          {{ 'register.button_next' | translate }}
        </button>
      </div>
      
    </div>
  </form>
</mat-step>


<!-- Paso Final -->
<mat-step [stepControl]="thirdFormGroup">
  <ng-template matStepLabel>
    <span class="step-label">{{ 'register.done' | translate }}</span>
  </ng-template>
  <form [formGroup]="form!">
    <div class="login-card">
      <div class="login-header">
        {{ 'register.welcome_label' | translate }}
      </div>
      <div class="login-icon">
        <img src="assets/img/user-icon.png" alt="User Icon">
      </div>

      <div class="login-header">
        {{ 'register.final_step_label' | translate }}
      </div>

      <mat-form-field class="custom-field">
        <mat-label>{{ 'register.password' | translate }}</mat-label>
        <input matInput type="password" class="custom-input" [placeholder]="'register.password_label' | translate" formControlName="password">
        <mat-icon matPrefix>key</mat-icon>
      </mat-form-field>

      <div id="recaptcha-container" class="g-recaptcha" data-callback="onCaptchaResolved" data-sitekey="6Lcanv0qAAAAAJZXEdthr0g_wb1wMR6lYSEjOFro"></div>
      <p *ngIf="!onCaptchaPassed" class="error-text">{{ 'register.captcha_error_label' | translate }}</p>

      <button mat-raised-button color="primary" class="login-btn" [disabled]="form?.invalid || !onCaptchaPassed">
        {{ 'register.button' | translate }}
      </button>

      <div style="display: flex; justify-content: space-between;">
        <button mat-button color="primary" class="login-btn" matStepperPrevious>
          {{ 'register.button_back' | translate }}
        </button>
        <button mat-button color="primary" class="login-btn" (click)="stepper.reset()">
          {{ 'register.button_reset' | translate }}
        </button>
      </div>
      <p style="margin-top: 15px;">
        {{ 'register.have_account' | translate }} <a href="/login">{{ 'register.login_now' | translate }}</a>
      </p> 
    </div>
  </form>
</mat-step>
    